{"version":3,"sources":["js/main.js"],"names":["url","add","document","getElementById","getCourses","fetch","then","res","json","data","output","forEach","course","concat","code","name","level","syllabus","innerHTML","err","console","log","addCourse","e","preventDefault","formData","JSON","stringify","value","method","headers","Content-Type","body","mess","message","querySelector","reset","window","onload","addEventListener"],"mappings":"aACA,IAAMA,IAAM,wDACRC,IAAMC,SAASC,eAAe,OAOlC,SAASC,aACLC,MAAML,KACLM,KAAK,SAACC,GAAD,OAASA,EAAIC,SAClBF,KAAK,SAACG,GAGH,IAAIC,EAAS,+EAGbD,EAAKE,QAAQ,SAAAC,GACTF,GAAM,mDAAAG,OAEQD,EAAOE,KAFf,mCAAAD,OAGQD,EAAOG,KAHf,mCAAAF,OAIQD,EAAOI,MAJf,4CAAAH,OAKiBD,EAAOK,SALxB,0EASdf,SAASC,eAAe,gBAAgBe,UAAYR,IAlBpD,MAqBO,SAACS,GAAD,OAASC,QAAQC,IAAIF,KAIhC,SAASG,UAAUC,GACfA,EAAEC,iBAGF,IAAIC,EAAWC,KAAKC,UAAU,CAC1Bb,KAAMZ,SAASC,eAAe,QAAQyB,MACtCb,KAAMb,SAASC,eAAe,QAAQyB,MACtCZ,MAAOd,SAASC,eAAe,SAASyB,MACxCX,SAAUf,SAASC,eAAe,YAAYyB,QAIlDvB,MAAML,IAAK,CACP6B,OAAQ,OACRC,QAAS,CACLC,eAAgB,oBAEpBC,KAAMP,IAETnB,KAAK,SAACC,GAAD,OAASA,EAAIC,SAClBF,KAAK,SAACG,GACH,IAAIwB,EAAI,sBAAApB,OAAyBJ,EAAKyB,QAA9B,QAEZhC,SAASC,eAAe,QAAQe,UAAYe,IAX5C,MAaO,SAACd,GAAD,OAASC,QAAQC,IAAIF,KAG5BjB,SAASiC,cAAc,QAAQC,QA1DnCC,OAAOC,OAASlC,WAChBH,IAAIsC,iBAAiB,QAASjB","file":"main.js","sourcesContent":["// Variables\nconst url = 'http://studenter.miun.se/~mohj1800/web3/mom5/rest.php';\nvar add = document.getElementById('add');\n\n// Eventlisteners\nwindow.onload = getCourses;\nadd.addEventListener('click', addCourse);\n\n//Function to get courses from REST\nfunction getCourses() {\n    fetch(url)\n    .then((res) => res.json())\n    .then((data) => {\n\n        //Varable for table\n        let output = '<tr><th>Kurskod</th><th>Kursnamn</th><th>Kursnivå</th><th>Kursplan</th></tr>';\n\n        //Loop trough courses\n        data.forEach(course => {\n            output +=`\n                <tr>\n                    <td>${course.code}</td>\n                    <td>${course.name}</td>\n                    <td>${course.level}</td>\n                    <td><a href=\"${course.syllabus}\" target=\"_blank\">Länk</a></td>\n                </tr>\n            `;\n        })\n    document.getElementById('course_table').innerHTML = output;\n    })\n    // Catch error if exists and writes to console\n    .catch((err) => console.log(err))\n}\n\n// Function to add course\nfunction addCourse(e) {\n    e.preventDefault();\n\n    // Data from form to JSON\n    let formData = JSON.stringify({\n        code: document.getElementById('code').value,\n        name: document.getElementById('name').value,\n        level: document.getElementById('level').value,\n        syllabus: document.getElementById('syllabus').value\n    });\n    \n    // Send JSON to REST webservice\n    fetch(url, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: formData\n    })\n    .then((res) => res.json())\n    .then((data) => { // Write status message\n        let mess = `<p class=\"message\">${data.message}</p>`;\n\n    document.getElementById('mess').innerHTML = mess;\n    })\n    .catch((err) => console.log(err)) // Catch error if exists and writes to console\n\n    // Clear form\n    document.querySelector('form').reset();\n}"]}